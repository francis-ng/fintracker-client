{"version":3,"sources":["utils/authConnector.js","utils/authUtils.js","components/AuthScreen.js","utils/ledgerConnector.js","components/LedgerList.js","components/LedgerDetails.js","App.js","serviceWorker.js","index.js"],"names":["getServerUrl","isReachable","fetch","this","method","mode","then","resp","catch","err","login","username","password","url","headers","body","JSON","stringify","UserName","Password","response","ok","json","data","success","token","register","getToken","localStorage","getItem","saveToken","setItem","AuthSceen","props","showLogin","bind","showRegister","handleInputChange","handleLogin","handleRegister","verifyPassword","loggedIn","completionCallback","state","showSpinner","regSuccess","regFailed","loginFailed","LoginUserName","LoginPassword","RegUserName","RegPassword","RegPasswordVerify","setState","event","value","target","name","preventDefault","authConnector","result","authUtils","onSubmit","Stack","tokens","childrenGap","horizontalAlign","MessageBar","messageBarType","MessageBarType","isMultiline","error","TextField","label","onChange","required","type","horizontal","verticalAlign","PrimaryButton","text","Spinner","size","SpinnerSize","small","Link","onClick","onGetErrorMessage","Component","listLedgers","getUrl","authHeader","Headers","status","getLedger","year","month","addLedger","ledger","addUrl","updateLedger","updateUrl","Id","deleteLedger","deleteUrl","LedgerList","updateLedgerList","showFixed","onChangeHandler","renderCell","showingFixed","selectionHandler","selectHandler","loginHandler","months","ledgers","commandItems","key","iconProps","iconName","farItems","ariaLabel","iconOnly","dropdownOptions","displayedLedgers","years","i","length","indexOf","Year","push","parseInt","sort","a","b","options","ledgerConnector","filter","item","Type","sortLedgers","configureDropdown","dataset","Month","date","Date","latestYear","getFullYear","latestMonth","getMonth","filterByYear","index","className","data-year","data-month","Text","data-is-scrollable","Dropdown","placeholder","CommandBar","items","medium","List","onRenderCell","LedgerDetails","save","addItem","handleTabClick","renderItemColumn","populateFixedItems","backToList","returnHandler","parameters","selection","newLedger","displayprops","columns","fieldName","isPadded","stackItemStyles","root","alignItems","justifyContent","display","Debits","DebitTotal","Credits","CreditTotal","selectedTab","saveSuccess","saveFailed","dataLoaded","getLedgerDetails","prevProps","console","log","prevState","concat","Label","Amount","total","current","itemKey","map","el","reduce","calculateTotal","column","data-index","Pivot","selectedKey","onLinkClick","styles","link","width","linkIsSelected","PivotItem","headerText","ShimmeredDetailsList","selectionMode","SelectionMode","none","layoutMode","DetailsListLayoutMode","justified","isHeaderVisible","enableShimmer","onRenderItemColumn","padding","Item","grow","App","title","showLedgerList","showLedger","selectedLedger","origin","dir","variant","CSSTransition","in","timeout","classNames","mountOnEnter","unmountOnExit","AuthScreen","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","initializeIcons","ReactDOM","render","Fabric","document","getElementById","URL","process","href","addEventListener","contentType","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.cfece66b.chunk.js","sourcesContent":["function getServerUrl() {\r\n  return 'https://fintrack-image-occpy2fuaa-an.a.run.app';\r\n  //return 'http://localhost'\r\n}\r\n\r\nfunction isReachable() {\r\n  return fetch(this.getServerUrl(), { method: 'HEAD', mode: 'no-cors' })\r\n    .then((resp) => {\r\n      return true;\r\n    })\r\n    .catch((err) => {\r\n      return false;\r\n    });\r\n}\r\n\r\nfunction login(username, password) {\r\n  var url = this.getServerUrl() + '/api/user/login';\r\n\r\n  return fetch(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ UserName: username, Password: password })\r\n  }).then((response) => {\r\n    if (response.ok) {\r\n      return response.json().then((data) => {\r\n        return {\r\n          success: true,\r\n          token: data.token\r\n        };\r\n      });\r\n    }\r\n    else {\r\n      return {\r\n        success: false\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nfunction register(username, password) {\r\n  var url = this.getServerUrl() + '/api/user/register';\r\n\r\n  return fetch(url, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ UserName: username, Password: password })\r\n  }).then((response) => {\r\n    if (response.ok) {\r\n      return {\r\n        success: true\r\n      };\r\n    }\r\n    else {\r\n      return {\r\n        success: false\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nexport default {\r\n  getServerUrl,\r\n  isReachable,\r\n  login,\r\n  register\r\n};\r\n","function getToken() {\r\n  return localStorage.getItem('authToken');\r\n}\r\n\r\nfunction saveToken(token) {\r\n  localStorage.setItem('authToken', token);\r\n}\r\n\r\nexport default {\r\n  getToken,\r\n  saveToken\r\n};","import React, { Component } from 'react';\r\nimport { PrimaryButton, MessageBar, MessageBarType } from 'office-ui-fabric-react';\r\nimport { Link } from 'office-ui-fabric-react/lib/Link';\r\nimport { Spinner, SpinnerSize } from 'office-ui-fabric-react/lib/Spinner';\r\nimport { Stack } from 'office-ui-fabric-react/lib/Stack';\r\nimport { TextField } from 'office-ui-fabric-react/lib/TextField';\r\nimport authConnector from '../utils/authConnector.js';\r\nimport authUtils from '../utils/authUtils.js';\r\n\r\nclass AuthSceen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.showLogin = this.showLogin.bind(this);\r\n    this.showRegister = this.showRegister.bind(this);\r\n    this.handleInputChange = this.handleInputChange.bind(this);\r\n    this.handleLogin = this.handleLogin.bind(this);\r\n    this.handleRegister = this.handleRegister.bind(this);\r\n    this.verifyPassword = this.verifyPassword.bind(this);\r\n\r\n    this.loggedIn = this.props.completionCallback;\r\n    this.state = {\r\n      showLogin: true,\r\n      showRegister: false,\r\n      showSpinner: false,\r\n      regSuccess: false,\r\n      regFailed: false,\r\n      loginFailed: false,\r\n      LoginUserName: '',\r\n      LoginPassword: '',\r\n      RegUserName: '',\r\n      RegPassword: '',\r\n      RegPasswordVerify: ''\r\n    }\r\n  }\r\n\r\n  showLogin() {\r\n    this.setState({\r\n      showLogin: true,\r\n      showRegister: false,\r\n      regSuccess: false,\r\n      regFailed: false,\r\n      loginFailed: false\r\n    });\r\n  }\r\n\r\n  showRegister() {\r\n    this.setState({\r\n      showLogin: false,\r\n      showRegister: true,\r\n      regSuccess: false,\r\n      regFailed: false,\r\n      loginFailed: false\r\n    });\r\n  }\r\n\r\n  handleInputChange(event) {\r\n    const value = event.target.value;\r\n    const name = event.target.name;\r\n\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  verifyPassword(value) {\r\n    return value === this.state.RegPassword ? '' : 'Passwords do not match';\r\n  }\r\n\r\n  handleLogin(event) {\r\n    event.preventDefault();\r\n\r\n    this.setState({\r\n      showSpinner: true\r\n    });\r\n    authConnector.login(this.state.LoginUserName, this.state.LoginPassword).then((result) => {\r\n      this.setState({\r\n        showSpinner: false\r\n      });\r\n      if (result.success) {\r\n        authUtils.saveToken(result.token);\r\n        this.setState({\r\n          regSuccess: false,\r\n          loginFailed: false\r\n        });\r\n        this.loggedIn();\r\n      }\r\n      else {\r\n        this.setState({\r\n          regSuccess: false,\r\n          loginFailed: true\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  handleRegister(event) {\r\n    event.preventDefault();\r\n\r\n    if (this.state.RegPassword !== this.state.RegPasswordVerify) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      showSpinner: true\r\n    });\r\n    authConnector.register(this.state.LoginUserName, this.state.LoginPassword).then((result) => {\r\n      this.setState({\r\n        showSpinner: false\r\n      });\r\n      if (result.success) {\r\n        this.setState({\r\n          showLogin: true,\r\n          showRegister: false,\r\n          regSuccess: true,\r\n          regFailed: false\r\n        });\r\n      }\r\n      else {\r\n        this.setState({\r\n          regFailed: true\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {\r\n          this.state.showLogin &&\r\n          <form onSubmit={this.handleLogin}>\r\n            <Stack tokens={{ childrenGap: 10 }} horizontalAlign=\"center\">\r\n              {\r\n                this.state.regSuccess &&\r\n                <MessageBar messageBarType={MessageBarType.success} isMultiline={false}>\r\n                  Registration successful\r\n                </MessageBar>\r\n              }\r\n              {\r\n                this.state.loginFailed &&\r\n                <MessageBar messageBarType={MessageBarType.error} isMultiline={false}>\r\n                  The username and password do not match\r\n                </MessageBar>\r\n              }\r\n              <TextField label=\"User name\" name=\"LoginUserName\" value={this.state.LoginUserName} onChange={this.handleInputChange} required />\r\n              <TextField label=\"Password\" name=\"LoginPassword\" value={this.state.LoginPassword} onChange={this.handleInputChange} type=\"password\" required />\r\n              <Stack horizontal tokens={{ childrenGap: 10 }} verticalAlign=\"center\">\r\n                <PrimaryButton text=\"Login\" type=\"submit\" />\r\n                { this.state.showSpinner && <Spinner size={SpinnerSize.small} /> }\r\n              </Stack>\r\n              <Link onClick={this.showRegister}>Click here to register</Link>\r\n            </Stack>\r\n          </form>\r\n        }\r\n        {\r\n          this.state.showRegister &&\r\n          <form onSubmit={this.handleRegister}>\r\n            <Stack tokens={{ childrenGap: 10 }} horizontalAlign=\"center\">\r\n              {\r\n                this.state.regFailed &&\r\n                <MessageBar messageBarType={MessageBarType.error} isMultiline={false}>\r\n                  The username and password do not match.\r\n                </MessageBar>\r\n              }\r\n              <TextField label=\"User name\" name=\"RegUserName\" value={this.state.RegUserName} onChange={this.handleInputChange} required />\r\n              <TextField label=\"Password\" name=\"RegPassword\" type=\"password\" value={this.state.RegPassword} onChange={this.handleInputChange} required />\r\n              <TextField label=\"Verify password\" name=\"RegPasswordVerify\" type=\"password\" value={this.state.RegPasswordVerify} onChange={this.handleInputChange} onGetErrorMessage={this.verifyPassword} required />\r\n              <Stack horizontal tokens={{ childrenGap: 10 }} verticalAlign=\"center\">\r\n                <PrimaryButton text=\"Register\" type=\"submit\" />\r\n                { this.state.showSpinner && <Spinner size={SpinnerSize.small} /> }\r\n              </Stack>\r\n              <Link onClick={this.showLogin}>Return to login</Link>\r\n            </Stack>\r\n          </form>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AuthSceen;","function getServerUrl() {\r\n  return 'https://fintrack-image-occpy2fuaa-an.a.run.app';\r\n  //return 'http://localhost'\r\n}\r\n\r\nfunction listLedgers(token) {\r\n  var getUrl = this.getServerUrl() + '/api/ledger/list';\r\n\r\n  var authHeader = new Headers({\r\n    'Authorization': 'Bearer ' + token\r\n  });\r\n\r\n  return fetch(getUrl, { headers: authHeader }).then((response) => {\r\n    if (response.ok) {\r\n      return response.json().then((data) => {\r\n        return {\r\n          success: true,\r\n          data: data\r\n        };\r\n      });\r\n    }\r\n    else {\r\n      if (response.status === 404) {\r\n        return {\r\n          success: false,\r\n          status: 'Not found'\r\n        };\r\n      }\r\n      else if (response.status === 401 || response.status === 403) {\r\n        return {\r\n          success: false,\r\n          status: 'Unauthorized'\r\n        };\r\n      }\r\n      return {\r\n        success: false,\r\n        status: 'Error',\r\n        data: []\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nfunction getLedger(token, year, month) {\r\n  var getUrl = this.getServerUrl() + '/api/ledger/get?year=' + year + '&month=' + month;\r\n  var authHeader = new Headers({\r\n    'Authorization': 'Bearer ' + token\r\n  });\r\n\r\n  return fetch(getUrl, { headers: authHeader }).then((response) => {\r\n    if (response.ok) {\r\n      return response.json().then((data) => {\r\n        return {\r\n          success: true,\r\n          data: data\r\n        };\r\n      });\r\n    }\r\n    else {\r\n      if (response.status === 401 || response.status === 403) {\r\n        return {\r\n          success: false,\r\n          status: 'Unauthorized'\r\n        };\r\n      }\r\n      else if (response.status === 404) {\r\n        return {\r\n          success: false,\r\n          status: 'Not found'\r\n        };\r\n      }\r\n      return {\r\n        success: false,\r\n        status: 'Error',\r\n        data: {\r\n          \"Id\": \"\",\r\n          \"Owner\": \"\",\r\n          \"Type\": \"\",\r\n          \"Month\": \"\",\r\n          \"Year\": \"\",\r\n          \"Debits\": [\r\n          ],\r\n          \"DebitTotal\": \"\",\r\n          \"Credits\": [\r\n          ],\r\n          \"CreditTotal\": \"\"\r\n        }\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nfunction addLedger(token, ledger) {\r\n  var addUrl = this.getServerUrl() + '/api/ledger/add';\r\n  var authHeader = new Headers({\r\n    'Authorization': 'Bearer ' + token,\r\n    'Content-Type': 'application/json'\r\n  });\r\n\r\n  return fetch(addUrl, {\r\n    method: 'POST',\r\n    headers: authHeader,\r\n    body: JSON.stringify(ledger)\r\n  })\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return {\r\n        success: true\r\n      };\r\n    }\r\n    else {\r\n      if (response.status === 401 || response.status === 403) {\r\n        return {\r\n          success: false,\r\n          status: 'Unauthorized'\r\n        };\r\n      }\r\n      return {\r\n        success: false,\r\n        status: 'Error'\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateLedger(token, ledger) {\r\n  var updateUrl = this.getServerUrl() + '/api/ledger/update?id=' + ledger.Id;\r\n  var authHeader = new Headers({\r\n    'Authorization': 'Bearer ' + token,\r\n    'Content-Type': 'application/json'\r\n  });\r\n\r\n  return fetch(updateUrl, {\r\n    method: 'PUT',\r\n    headers: authHeader,\r\n    body: JSON.stringify(ledger)\r\n  })\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return {\r\n        success: true\r\n      };\r\n    }\r\n    else {\r\n      if (response.status === 401 || response.status === 403) {\r\n        return {\r\n          success: false,\r\n          status: 'Unauthorized'\r\n        };\r\n      }\r\n      return {\r\n        success: false,\r\n        status: 'Error'\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nfunction deleteLedger(token, ledger) {\r\n  var deleteUrl = this.getServerUrl() + '/api/ledger/delete?id=' + ledger.Id;\r\n  var authHeader = new Headers({\r\n    'Authorization': 'Bearer ' + token,\r\n    'Content-Type': 'application/json'\r\n  });\r\n\r\n  return fetch(deleteUrl, {\r\n    method: 'DELETE',\r\n    headers: authHeader\r\n  })\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return {\r\n        success: true\r\n      };\r\n    }\r\n    else {\r\n      if (response.status === 401 || response.status === 403) {\r\n        return {\r\n          success: false,\r\n          status: 'Unauthorized'\r\n        };\r\n      }\r\n      return {\r\n        success: false,\r\n        status: 'Error'\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\nexport default {\r\n  getServerUrl,\r\n  listLedgers,\r\n  getLedger,\r\n  addLedger,\r\n  updateLedger,\r\n  deleteLedger\r\n};\r\n","import React, { Component } from 'react';\r\nimport { CommandBar } from 'office-ui-fabric-react/lib/CommandBar';\r\nimport { Text } from 'office-ui-fabric-react/lib/Text';\r\nimport { Dropdown } from 'office-ui-fabric-react/lib/Dropdown';\r\nimport { List } from 'office-ui-fabric-react/lib/List';\r\nimport { Stack } from 'office-ui-fabric-react/lib/Stack';\r\nimport { Spinner, SpinnerSize } from 'office-ui-fabric-react/lib/Spinner';\r\nimport ledgerConnector from './../utils/ledgerConnector.js';\r\nimport authUtils from './../utils/authUtils.js';\r\n\r\nclass LedgerList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.updateLedgerList = this.updateLedgerList.bind(this);\r\n    this.addLedger = this.addLedger.bind(this);\r\n    this.showFixed = this.showFixed.bind(this);\r\n    this.onChangeHandler = this.onChangeHandler.bind(this);\r\n    this.renderCell = this.renderCell.bind(this);\r\n\r\n    this.showingFixed = false;\r\n    this.selectionHandler = this.props.selectHandler;\r\n    this.loginHandler = this.props.loginHandler;\r\n    this.months = ['', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n    this.ledgers = [];\r\n    this.commandItems = [\r\n      {\r\n        key: 'new',\r\n        text: 'New item',\r\n        iconProps: { iconName: 'Add' },\r\n        onClick: this.addLedger\r\n      }\r\n    ];\r\n    this.farItems = [\r\n      {\r\n        key: 'fixed',\r\n        text: 'Fixed',\r\n        iconProps: { iconName: 'Calendar' },\r\n        onClick: this.showFixed\r\n      },\r\n      {\r\n        key: 'refresh',\r\n        text: 'Refresh',\r\n        ariaLabel: 'Refresh',\r\n        iconOnly: true,\r\n        iconProps: { iconName: 'Refresh' },\r\n        onClick: this.updateLedgerList\r\n      }\r\n    ];\r\n    this.state = {\r\n      dropdownOptions: [],\r\n      displayedLedgers: [],\r\n      showSpinner: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateLedgerList();\r\n  }\r\n\r\n  configureDropdown() {\r\n    let years = [];\r\n    for (let i = 0; i < this.ledgers.length; i++) {\r\n      if (years.indexOf(this.ledgers[i].Year) === -1) {\r\n        years.push(parseInt(this.ledgers[i].Year));\r\n      }\r\n    }\r\n    years.sort((a, b) => b - a); // Descending\r\n\r\n    let options = [];\r\n    options.push({ key: '', text: '' });\r\n    for (let i = 0; i < years.length; i++) {\r\n      options.push({ key: years[i], text: years[i] });\r\n    }\r\n    this.setState({\r\n      dropdownOptions: options\r\n    });\r\n  }\r\n\r\n  updateLedgerList() {\r\n    this.setState({\r\n      showSpinner: true\r\n    });\r\n    ledgerConnector.listLedgers(authUtils.getToken()).then((result) => {\r\n      this.setState({\r\n        showSpinner: false\r\n      });\r\n      if (result.success) {\r\n        this.ledgers = result.data.filter((item) => {\r\n          return item.Type === 'regular';\r\n        });\r\n        this.ledgers.sort(this.sortLedgers);\r\n        this.setState({\r\n          displayedLedgers: this.ledgers\r\n        });\r\n        this.configureDropdown();\r\n      }\r\n      else {\r\n        if (result.status === 'Unauthorized') {\r\n          this.loginHandler();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  showFixed() {\r\n    this.selectionHandler({\r\n      target: {\r\n        dataset: {\r\n          year: 0,\r\n          month: 0\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  filterByYear(year) {\r\n    return this.ledgers.filter((item) => {\r\n      return item.Year == year;\r\n    });\r\n  }\r\n\r\n  sortLedgers(a, b) {\r\n    if (a.Year !== b.Year) {\r\n      return b.Year - a.Year;\r\n    }\r\n    return b.Month - a.Month;\r\n  }\r\n\r\n  addLedger() {\r\n    let date = new Date();\r\n    let latestYear = date.getFullYear();\r\n    let latestMonth = date.getMonth() + 1;\r\n\r\n    if (this.ledgers.length > 0) {\r\n      latestYear = parseInt(this.ledgers[0].Year);\r\n      latestMonth = parseInt(this.ledgers[0].Month);\r\n\r\n      latestMonth++;\r\n      if (latestMonth === 13) {\r\n        latestYear++;\r\n        latestMonth = 1;\r\n      }\r\n    }\r\n\r\n    this.selectionHandler({\r\n      target: {\r\n        dataset: {\r\n          year: latestYear,\r\n          month: latestMonth\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onChangeHandler(event, item) {\r\n    if (item.value === '') {\r\n      this.setState({\r\n        displayedLedgers: this.ledgers\r\n      });\r\n    }\r\n    else {\r\n      this.setState({\r\n        displayedLedgers: this.filterByYear(item.value).sort(this.sortLedgers)\r\n      });\r\n    }\r\n  }\r\n\r\n  renderCell(item, index) {\r\n    return (\r\n      <div className=\"list-item\" onClick={this.selectionHandler} data-year={item.Year} data-month={item.Month}>\r\n        <Text data-year={item.Year} data-month={item.Month}>{`${item.Year} ${this.months[item.Month]}`}</Text>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div data-is-scrollable=\"true\">\r\n        <Stack>\r\n          <Dropdown placeholder=\"Filter by year\" options={this.state.dropdownOptions} onChange={this.onChangeHandler} />\r\n          <CommandBar\r\n            items={this.commandItems}\r\n            farItems={this.farItems}\r\n            ariaLabel=\"\"\r\n          />\r\n          { this.state.showSpinner && <Spinner size={SpinnerSize.medium} /> }\r\n          <List items={this.state.displayedLedgers} onRenderCell={this.renderCell} />\r\n        </Stack>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LedgerList;\r\n","import React, { Component } from 'react';\r\nimport { MessageBar, MessageBarType, DefaultPalette } from 'office-ui-fabric-react';\r\nimport { CommandBar } from 'office-ui-fabric-react/lib/CommandBar';\r\nimport { TextField } from 'office-ui-fabric-react/lib/TextField';\r\nimport { Pivot, PivotItem } from 'office-ui-fabric-react/lib/Pivot';\r\nimport { Stack } from 'office-ui-fabric-react/lib/Stack';\r\nimport { ShimmeredDetailsList } from 'office-ui-fabric-react/lib/ShimmeredDetailsList';\r\nimport { SelectionMode, DetailsListLayoutMode } from 'office-ui-fabric-react/lib/DetailsList';\r\nimport ledgerConnector from '../utils/ledgerConnector.js';\r\nimport authUtils from './../utils/authUtils.js';\r\n\r\nclass LedgerDetails extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.save = this.save.bind(this);\r\n    this.addItem = this.addItem.bind(this);\r\n    this.handleTabClick = this.handleTabClick.bind(this);\r\n    this.renderItemColumn = this.renderItemColumn.bind(this);\r\n    this.onChangeHandler = this.onChangeHandler.bind(this);\r\n    this.populateFixedItems = this.populateFixedItems.bind(this);\r\n\r\n    this.loginHandler = this.props.loginHandler;\r\n    this.backToList = this.props.returnHandler;\r\n    this.parameters = {\r\n      year: this.props.selection.year,\r\n      month: this.props.selection.month,\r\n      type: this.props.selection.year === 0 ? 'fixed' : 'regular'\r\n    };\r\n    this.newLedger = false;\r\n    this.displayprops = {\r\n      columns: [\r\n        {\r\n          key: 'item',\r\n          name: 'Item',\r\n          fieldName: 'Label',\r\n          isPadded: true\r\n        },\r\n        {\r\n          key: 'amount',\r\n          name: 'Amount',\r\n          fieldName: 'Amount',\r\n          isPadded: true\r\n        },\r\n      ],\r\n      stackItemStyles: {\r\n        root: {\r\n          alignItems: 'center',\r\n          justifyContent: 'right',\r\n          display: 'grid'\r\n        }\r\n      }\r\n    }\r\n    this.commandItems = [\r\n      {\r\n        key: 'back',\r\n        text: 'Back',\r\n        ariaLabel: 'Back',\r\n        iconOnly: true,\r\n        iconProps: { iconName: 'Back' },\r\n        onClick: this.backToList\r\n      },\r\n      {\r\n        key: 'new',\r\n        text: 'New item',\r\n        iconProps: { iconName: 'Add' },\r\n        onClick: this.addItem\r\n      }\r\n    ];\r\n    this.farItems = [\r\n      {\r\n        key: 'save',\r\n        text: 'Save',\r\n        ariaLabel: 'Save',\r\n        iconOnly: true,\r\n        iconProps: { iconName: 'CheckMark' },\r\n        onClick: this.save\r\n      }\r\n    ];\r\n    this.state = {\r\n      ledger: {\r\n        Type: this.parameters.type,\r\n        Month: this.parameters.month,\r\n        Year: this.parameters.year,\r\n        Debits: [],\r\n        DebitTotal: \"\",\r\n        Credits: [],\r\n        CreditTotal: \"\"\r\n      },\r\n      selectedTab: 'Debits',\r\n      saveSuccess: false,\r\n      saveFailed: false,\r\n      dataLoaded: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getLedgerDetails();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.selection.Year !== prevProps.selection.Year &&\r\n        this.props.selection.Month !== prevProps.selection.Month) {\r\n      this.getLedgerDetails();\r\n    }\r\n  }\r\n\r\n  getLedgerDetails() {\r\n    console.log(`Loading ${this.parameters.year}/${this.parameters.month}`);\r\n\r\n    ledgerConnector.getLedger(authUtils.getToken(), this.parameters.year, this.parameters.month).then((result) => {\r\n      this.setState({\r\n        dataLoaded: true\r\n      });\r\n      if (result.success) {\r\n        this.setState({\r\n          ledger: result.data\r\n        });\r\n      }\r\n      else {\r\n        if (result.status === 'Not found') {\r\n          console.log('No data found. New ledger will be created');\r\n          this.newLedger = true;\r\n          if (this.state.ledger.type === 'regular') {\r\n            this.populateFixedItems();\r\n          }\r\n        }\r\n        else if (result.status === 'Unauthorized') {\r\n          this.loginHandler();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  populateFixedItems() {\r\n    console.log(`Loading fixed items`);\r\n    this.setState({\r\n      dataLoaded: false\r\n    });\r\n\r\n    ledgerConnector.getLedger(authUtils.getToken(), 0, 0).then((result) => {\r\n      this.setState({\r\n        dataLoaded: true\r\n      });\r\n      if (result.success) {\r\n        this.setState(prevState => ({\r\n          ledger: {\r\n            ...prevState.ledger,\r\n            Debits: prevState.ledger.Debits.concat({\r\n              Label: 'Fixed expenses',\r\n              Amount: result.data.DebitTotal\r\n            }),\r\n            Credits: prevState.ledger.Credits.concat({\r\n              Label: 'Fixed income',\r\n              Amount: result.data.CreditTotal\r\n            }),\r\n            DebitTotal: result.data.DebitTotal,\r\n            CreditTotal: result.data.CreditTotal\r\n          }\r\n        }));\r\n      }\r\n      else {\r\n        if (result.status === 'Unauthorized') {\r\n          this.loginHandler();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  addItem() {\r\n    console.log(`Adding new item to ${this.state.selectedTab}`);\r\n\r\n    this.setState(prevState => ({\r\n      ledger: {\r\n        ...prevState.ledger,\r\n        [this.state.selectedTab]: prevState.ledger[this.state.selectedTab].concat({\r\n          Label: '',\r\n          Amount: ''\r\n        })\r\n      }\r\n    }));\r\n  }\r\n\r\n  save() {\r\n    this.setState({\r\n      saveSuccess: false,\r\n      saveFailed: false\r\n    });\r\n    if (this.newLedger) {\r\n      ledgerConnector.addLedger(authUtils.getToken(), this.state.ledger).then((result) => {\r\n        if (result.success) {\r\n          this.setState({\r\n            saveSuccess: true\r\n          });\r\n        }\r\n        else {\r\n          this.setState({\r\n            saveFailed: true\r\n          });\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      ledgerConnector.updateLedger(authUtils.getToken(), this.state.ledger).then((result) => {\r\n        if (result.success) {\r\n          this.setState({\r\n            saveSuccess: true\r\n          });\r\n        }\r\n        else {\r\n          this.setState({\r\n            saveFailed: true\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  calculateTotal(total, current) {\r\n    if (current.Amount) {\r\n      return total + parseInt(current.Amount);\r\n    }\r\n    return total;\r\n  }\r\n\r\n  handleTabClick(item) {\r\n    this.setState({\r\n      selectedTab: item.props.itemKey\r\n    });\r\n  }\r\n\r\n  onChangeHandler(event) {\r\n    const value = event.target.value;\r\n    const name = event.target.name;\r\n    const index = parseInt(event.target.dataset.index);\r\n    console.log(`Updating ${name} of item ${index} of ${this.state.selectedTab}`);\r\n\r\n    this.setState(prevState => ({\r\n      ledger: {\r\n        ...prevState.ledger,\r\n        [this.state.selectedTab]: prevState.ledger[this.state.selectedTab].map((el, i) => i === index ? {\r\n          ...el, [name]: value\r\n        } : el)\r\n      }\r\n    }), () => {\r\n      if (this.state.selectedTab === 'Debits') {\r\n        this.setState(prevState => ({\r\n          ledger: {\r\n            ...prevState.ledger,\r\n            DebitTotal: prevState.ledger.Debits.reduce(this.calculateTotal, 0)\r\n          }\r\n        }));\r\n      }\r\n      else {\r\n        this.setState(prevState => ({\r\n          ledger: {\r\n            ...prevState.ledger,\r\n            CreditTotal: prevState.ledger.Credits.reduce(this.calculateTotal, 0)\r\n          }\r\n        }));\r\n      }\r\n    });\r\n  }\r\n\r\n  renderItemColumn(item, index, column) {\r\n    switch (column.key) {\r\n      case 'item':\r\n        return <TextField ariaLabel=\"Item\" name=\"Label\" data-index={index} value={this.state.ledger[this.state.selectedTab][index].Label} onChange={this.onChangeHandler} />;\r\n\r\n      case 'amount':\r\n        return <TextField ariaLabel=\"Amount\" name=\"Amount\" type=\"number\" data-index={index} value={this.state.ledger[this.state.selectedTab][index].Amount} onChange={this.onChangeHandler} />;\r\n\r\n      default:\r\n        return;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {\r\n          this.state.saveSuccess &&\r\n          <MessageBar messageBarType={MessageBarType.success} isMultiline={false}>\r\n            Saved\r\n          </MessageBar>\r\n        }\r\n        {\r\n          this.state.saveFailed &&\r\n          <MessageBar messageBarType={MessageBarType.error} isMultiline={false}>\r\n            Could not save. Please try again.\r\n          </MessageBar>\r\n        }\r\n        <CommandBar\r\n          items={this.commandItems}\r\n          farItems={this.farItems}\r\n          ariaLabel=\"\"\r\n        />\r\n        <Pivot\r\n            selectedKey={this.state.selectedTab}\r\n            onLinkClick={this.handleTabClick}\r\n            styles={{ link: {width:\"50%\"}, linkIsSelected: {width:\"50%\"} }}>\r\n          <PivotItem headerText=\"Expenses\" itemKey=\"Debits\">\r\n            <div data-is-scrollable=\"true\">\r\n              <ShimmeredDetailsList\r\n                items={this.state.ledger.Debits}\r\n                columns={this.displayprops.columns}\r\n                selectionMode={SelectionMode.none}\r\n                layoutMode={DetailsListLayoutMode.justified}\r\n                isHeaderVisible={true}\r\n                enableShimmer={!this.state.dataLoaded}\r\n                onRenderItemColumn={this.renderItemColumn}\r\n              />\r\n              <Stack horizontal horizontalAlign=\"end\" tokens={{ childrenGap: 10, padding: 32 }}>\r\n              <Stack.Item grow={5} styles={this.displayprops.stackItemStyles}>\r\n                  Total\r\n                </Stack.Item>\r\n                <Stack.Item grow styles={this.displayprops.stackItemStyles}>\r\n                  {this.state.ledger.DebitTotal}\r\n                </Stack.Item>\r\n              </Stack>\r\n            </div>\r\n          </PivotItem>\r\n          <PivotItem headerText=\"Income\" itemKey=\"Credits\">\r\n            <div data-is-scrollable=\"true\">\r\n              <ShimmeredDetailsList\r\n                items={this.state.ledger.Credits}\r\n                columns={this.displayprops.columns}\r\n                selectionMode={SelectionMode.none}\r\n                layoutMode={DetailsListLayoutMode.justified}\r\n                isHeaderVisible={true}\r\n                enableShimmer={!this.state.dataLoaded}\r\n                onRenderItemColumn={this.renderItemColumn}\r\n              />\r\n              <Stack horizontal horizontalAlign=\"end\" tokens={{ childrenGap: 10, padding: 32 }}>\r\n                <Stack.Item grow={5} styles={this.displayprops.stackItemStyles}>\r\n                  Total\r\n                </Stack.Item>\r\n                <Stack.Item grow styles={this.displayprops.stackItemStyles}>\r\n                  {this.state.ledger.CreditTotal}\r\n                </Stack.Item>\r\n              </Stack>\r\n            </div>\r\n          </PivotItem>\r\n        </Pivot>\r\n        <Stack horizontal horizontalAlign=\"end\" tokens={{ childrenGap: 10, padding: 32 }}>\r\n          <Stack.Item grow={5} styles={this.displayprops.stackItemStyles}>\r\n            <b>Net</b>\r\n          </Stack.Item>\r\n          <Stack.Item grow styles={this.displayprops.stackItemStyles}>\r\n            <b>{this.state.ledger.CreditTotal - this.state.ledger.DebitTotal}</b>\r\n          </Stack.Item>\r\n        </Stack>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LedgerDetails;\r\n","import React, { Component } from 'react';\nimport { Text } from 'office-ui-fabric-react/lib/Text';\nimport { CSSTransition } from 'react-transition-group';\nimport AuthScreen from './components/AuthScreen.js';\nimport LedgerList from './components/LedgerList.js';\nimport LedgerDetails from './components/LedgerDetails.js';\nimport './css/App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.loginHandler = this.loginHandler.bind(this);\n    this.selectionHandler = this.selectionHandler.bind(this);\n    this.backToList = this.backToList.bind(this);\n    this.loggedIn = this.loggedIn.bind(this);\n\n    this.state = {\n      title: 'Ledgers',\n      showLedgerList: true,\n      showLedger: false,\n      showLogin: false,\n      selectedLedger: {\n        year: '',\n        month: ''\n      }\n    };\n    this.months = ['', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n  }\n\n  loginHandler() {\n    this.origin = this.state.title;\n    this.setState({\n      title: 'Sign in',\n      showLedgerList: false,\n      showLedger: false,\n      showLogin: true\n    });\n  }\n\n  loggedIn() {\n    if (this.origin === 'Ledgers') {\n      this.setState({\n        title: 'Ledgers',\n        showLedgerList: true,\n        showLedger: false,\n        showLogin: false\n      });\n    }\n    else {\n      this.setState({\n        title: this.origin,\n        showLedgerList: false,\n        showLedger: true,\n        showLogin: false\n      });\n    }\n  }\n\n  selectionHandler(event) {\n    let year = parseInt(event.target.dataset.year);\n    let month = parseInt(event.target.dataset.month);\n    let title = `${year} ${this.months[month]}`;\n\n    if (year === 0 && month === 0) {\n      title = 'Fixed items';\n    }\n\n    this.setState({\n      title: title,\n      selectedLedger: {\n        year: year,\n        month: month\n      },\n      showLedgerList: false,\n      showLedger: true,\n      showLogin: false\n    });\n  }\n\n  backToList() {\n    this.setState({\n      title: 'Ledgers',\n      showLedgerList: true,\n      showLedger: false,\n      showLogin: false\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"ms-Grid\" dir=\"ltr\">\n        <div className=\"ms-Grid-row header\">\n          <div className=\"ms-Grid-col ms-sm12 align-center\">\n            <Text variant={'large'}>{this.state.title}</Text>\n          </div>\n        </div>\n        <CSSTransition in={this.state.showLedgerList} timeout={200} classNames=\"ledgerList\" mountOnEnter unmountOnExit>\n          <LedgerList selectHandler={this.selectionHandler} loginHandler={this.loginHandler} />\n        </CSSTransition>\n        <CSSTransition in={this.state.showLedger} timeout={200} classNames=\"ledgerDetails\" mountOnEnter unmountOnExit>\n          <LedgerDetails selection={this.state.selectedLedger} loginHandler={this.loginHandler} returnHandler={this.backToList} />\n        </CSSTransition>\n        <CSSTransition in={this.state.showLogin} timeout={200} classNames=\"authScreen\" mountOnEnter unmountOnExit>\n          <AuthScreen completionCallback={this.loggedIn} />\n        </CSSTransition>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/workers/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Fabric } from 'office-ui-fabric-react/lib/Fabric';\nimport { initializeIcons } from 'office-ui-fabric-react/lib/Icons';\nimport './css/index.css';\nimport '../node_modules/office-ui-fabric-react/dist/css/fabric.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\ninitializeIcons();\n\nReactDOM.render(\n  <Fabric>\n    <App />\n  </Fabric>\n  , document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}